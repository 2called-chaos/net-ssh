<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>Net::SSH::Connection::Session</title>
    <meta content='text/html; charset=US-ASCII' http-equiv='Content-Type'>
    <link href='../../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>class</span>
          Net::SSH::Connection::Session
        </h1>
        <ol class='paths'>
          <li>
            <a target="docwin" href="../../../../files/lib/net/ssh/connection/session_rb.html">lib/net/ssh/connection/session.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong><a target="docwin" href="../Connection.html">Connection</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <p>A session class representing the connection service running on top of the
            <a href="../../SSH.html">SSH</a> transport layer. It manages the creation
            of channels (see <a
            href="Session.html#method-i-open_channel">open_channel</a>), and the
            dispatching of messages to the various channels. It also encapsulates the
            <a href="../../SSH.html">SSH</a> event loop (via <a
            href="Session.html#method-i-loop">loop</a> and <a
            href="Session.html#method-i-process">process</a>), and serves as a central
            point-of-reference for all SSH-related services (e.g. port forwarding,
            SFTP, SCP, etc.).</p>
            
            <p>You will rarely (if ever) need to instantiate this class directly; rather,
            you'll almost always use <a
            href="../../SSH.html#method-c-start">Net::SSH.start</a> to initialize a new
            network connection, authenticate a user, and return a new connection
            session, all in one call.</p>
            
            <pre>Net::SSH.start(&quot;localhost&quot;, &quot;user&quot;) do |ssh|&#x000A;  # 'ssh' is an instance of Net::SSH::Connection::Session&#x000A;  ssh.exec! &quot;/etc/init.d/some_process start&quot;&#x000A;end</pre>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Class</h3>
            <ol>
              <li><a target="docwin" href="#method-c-new">new</a></li>
            </ol>
            <h3>Public Instance</h3>
            <ol>
              <li><a target="docwin" href="#method-i-5B-5D">[]</a></li>
              <li><a target="docwin" href="#method-i-5B-5D-3D">[]=</a></li>
              <li><a target="docwin" href="#method-i-busy-3F">busy?</a></li>
              <li><a target="docwin" href="#method-i-close">close</a></li>
              <li><a target="docwin" href="#method-i-closed-3F">closed?</a></li>
              <li><a target="docwin" href="#method-i-exec">exec</a></li>
              <li><a target="docwin" href="#method-i-exec-21">exec!</a></li>
              <li><a target="docwin" href="#method-i-forward">forward</a></li>
              <li><a target="docwin" href="#method-i-host">host</a></li>
              <li><a target="docwin" href="#method-i-listen_to">listen_to</a></li>
              <li><a target="docwin" href="#method-i-loop">loop</a></li>
              <li><a target="docwin" href="#method-i-on_global_request">on_global_request</a></li>
              <li><a target="docwin" href="#method-i-on_open_channel">on_open_channel</a></li>
              <li><a target="docwin" href="#method-i-open_channel">open_channel</a></li>
              <li><a target="docwin" href="#attribute-i-options">options</a></li>
              <li><a target="docwin" href="#method-i-postprocess">postprocess</a></li>
              <li><a target="docwin" href="#method-i-preprocess">preprocess</a></li>
              <li><a target="docwin" href="#method-i-process">process</a></li>
              <li><a target="docwin" href="#attribute-i-properties">properties</a></li>
              <li><a target="docwin" href="#method-i-send_global_request">send_global_request</a></li>
              <li><a target="docwin" href="#method-i-send_message">send_message</a></li>
              <li><a target="docwin" href="#method-i-shutdown-21">shutdown!</a></li>
              <li><a target="docwin" href="#method-i-stop_listening_to">stop_listening_to</a></li>
              <li><a target="docwin" href="#attribute-i-transport">transport</a></li>
            </ol>
          </div>
          <div id='context'>
            <div id='includes'>
              <h2>Included modules</h2>
              <ol>
                <li><a target="docwin" href="Constants.html">Constants</a></li>
                <li><a target="docwin" href="../Loggable.html">Loggable</a></li>
              </ol>
            </div>
          </div>
          <div id='class-list'>
            <h2>Classes and Modules</h2>
            <ol>
              <li><a target="docwin" href="Session/NilChannel.html">Net::SSH::Connection::Session::NilChannel</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>DEFAULT_IO_SELECT_TIMEOUT</td>
                    <td>=</td>
                    <td class='context-item-value'>300</td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>Default IO.select timeout threshold</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>MAP</td>
                    <td>=</td>
                    <td class='context-item-value'>
                      Constants.constants.inject({}) do |memo, name|
                      value = const_get(name)
                      next unless Integer === value
                      memo[value] = name.downcase.to_sym
                      memo
                      end
                    </td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='aliases-list'>
              <h2>Public Instance Aliases</h2>
              <div class='name-list'>
                <table summary='Public Instance Aliases'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>loop_forever</td>
                    <td>-&gt;</td>
                    <td class='context-item-value'><a target="docwin" href="#method-i-loop">loop</a></td>
                    <td class='context-item-desc'>
                      
                      <p>preserve a reference to Kernel#loop</p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-options'>options</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The map of options that were used to initialize this instance.</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-properties'>properties</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The collection of custom properties for this instance. (See #[] and #[]=).</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-transport'>transport</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>The underlying transport layer abstraction (see <a
                      href="../Transport/Session.html">Net::SSH::Transport::Session</a>).</p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-new'>
                <a name='method-c-new'></a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(transport, options={})</span>
                </div>
                <div class='description'>
                  
                  <p>Create a new connection service instance atop the given transport layer.
                  Initializes the listeners to be only the underlying socket object.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-new-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-new-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 65</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">transport</span>, <span class="ruby-identifier">options</span>={})&#x000A;  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-identifier">transport</span>.<span class="ruby-identifier">logger</span>&#x000A;&#x000A;  <span class="ruby-ivar">@transport</span> = <span class="ruby-identifier">transport</span>&#x000A;  <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">options</span>&#x000A;&#x000A;  <span class="ruby-ivar">@channel_id_counter</span> = <span class="ruby-value">-1</span>&#x000A;  <span class="ruby-ivar">@channels</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">NilChannel</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>))&#x000A;  <span class="ruby-ivar">@listeners</span> = { <span class="ruby-identifier">transport</span>.<span class="ruby-identifier">socket</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span> }&#x000A;  <span class="ruby-ivar">@pending_requests</span> = []&#x000A;  <span class="ruby-ivar">@channel_open_handlers</span> = {}&#x000A;  <span class="ruby-ivar">@on_global_request</span> = {}&#x000A;  <span class="ruby-ivar">@properties</span> = (<span class="ruby-identifier">options</span>[<span class="ruby-value">:properties</span>] <span class="ruby-operator">||</span> {}).<span class="ruby-identifier">dup</span>&#x000A;&#x000A;  <span class="ruby-ivar">@max_pkt_size</span> = (<span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:max_pkt_size</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:max_pkt_size</span>] <span class="ruby-operator">:</span> <span class="ruby-value">0x8000</span>)&#x000A;  <span class="ruby-ivar">@max_win_size</span> = (<span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:max_win_size</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:max_win_size</span>] <span class="ruby-operator">:</span> <span class="ruby-value">0x20000</span>)&#x000A;&#x000A;  <span class="ruby-ivar">@last_keepalive_sent_at</span> = <span class="ruby-keyword">nil</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-5B-5D'>
                <a name='method-i-5B-5D'></a>
                <div class='synopsis'>
                  <span class='name'>[]</span>
                  <span class='arguments'>(key)</span>
                </div>
                <div class='description'>
                  
                  <p>Retrieves a custom property from this instance. This can be used to store
                  additional state in applications that must manage multiple <a
                  href="../../SSH.html">SSH</a> connections.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-5B-5D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-5B-5D-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 88</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">key</span>)&#x000A;  <span class="ruby-ivar">@properties</span>[<span class="ruby-identifier">key</span>]&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-5B-5D-3D'>
                <a name='method-i-5B-5D-3D'></a>
                <div class='synopsis'>
                  <span class='name'>[]=</span>
                  <span class='arguments'>(key, value)</span>
                </div>
                <div class='description'>
                  
                  <p>Sets a custom property for this instance.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-5B-5D-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-5B-5D-3D-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 93</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-operator">[]=</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)&#x000A;  <span class="ruby-ivar">@properties</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-busy-3F'>
                <a name='method-i-busy-3F'></a>
                <div class='synopsis'>
                  <span class='name'>busy?</span>
                  <span class='arguments'>(include_invisible=false)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns <tt>true</tt> if there are any channels currently active on this
                  session. By default, this will not include "invisible" channels (such as
                  those created by forwarding ports and such), but if you pass a
                  <tt>true</tt> value for <tt>include_invisible</tt>, then those will be
                  counted.</p>
                  
                  <p>This can be useful for determining whether the event loop should continue
                  to be run.</p>
                  
                  <pre>ssh.loop { ssh.busy? }</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-busy-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-busy-3F-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 142</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">busy?</span>(<span class="ruby-identifier">include_invisible</span>=<span class="ruby-keyword">false</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">include_invisible</span>&#x000A;    <span class="ruby-identifier">channels</span>.<span class="ruby-identifier">any?</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">channels</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span>, <span class="ruby-identifier">ch</span><span class="ruby-operator">|</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ch</span>[<span class="ruby-value">:invisible</span>] }&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-close'>
                <a name='method-i-close'></a>
                <div class='synopsis'>
                  <span class='name'>close</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Closes the session gracefully, blocking until all channels have
                  successfully closed, and then closes the underlying transport layer
                  connection.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-close-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-close-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 115</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">close</span>&#x000A;  <span class="ruby-identifier">info</span> { <span class="ruby-node">&quot;closing remaining channels (#{channels.length} open)&quot;</span> }&#x000A;  <span class="ruby-identifier">channels</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span>, <span class="ruby-identifier">channel</span><span class="ruby-operator">|</span> <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">close</span> }&#x000A;  <span class="ruby-identifier">loop</span>(<span class="ruby-value">0.1</span>) { <span class="ruby-identifier">channels</span>.<span class="ruby-identifier">any?</span> }&#x000A;  <span class="ruby-identifier">transport</span>.<span class="ruby-identifier">close</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-closed-3F'>
                <a name='method-i-closed-3F'></a>
                <div class='synopsis'>
                  <span class='name'>closed?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns true if the underlying transport has been closed. Note that this
                  can be a little misleading, since if the remote server has closed the
                  connection, the local end will still think it is open until the next
                  operation on the socket. Nevertheless, this method can be useful if you
                  just want to know if <em>you</em> have closed the connection.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-closed-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-closed-3F-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 108</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">closed?</span>&#x000A;  <span class="ruby-identifier">transport</span>.<span class="ruby-identifier">closed?</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-exec'>
                <a name='method-i-exec'></a>
                <div class='synopsis'>
                  <span class='name'>exec</span>
                  <span class='arguments'>(command, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>A convenience method for executing a command and interacting with it. If no
                  block is given, all output is printed via $stdout and $stderr. Otherwise,
                  the block is called for each data and extended data packet, with three
                  arguments: the channel object, a symbol indicating the data type (:stdout
                  or :stderr), and the data (as a string).</p>
                  
                  <p>Note that this method returns immediately, and requires an event loop (see
                  <a href="Session.html#method-i-loop">Session#loop</a>) in order for the
                  command to actually execute.</p>
                  
                  <p>This is effectively identical to calling <a
                  href="Session.html#method-i-open_channel">open_channel</a>, and then <a
                  href="Channel.html#method-i-exec">Net::SSH::Connection::Channel#exec</a>,
                  and then setting up the channel callbacks. However, for most uses, this
                  will be sufficient.</p>
                  
                  <pre>ssh.exec &quot;grep something /some/files&quot; do |ch, stream, data|&#x000A;  if stream == :stderr&#x000A;    puts &quot;ERROR: #{data}&quot;&#x000A;  else&#x000A;    puts data&#x000A;  end&#x000A;end</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-exec-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-exec-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 328</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">exec</span>(<span class="ruby-identifier">command</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">open_channel</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">channel</span><span class="ruby-operator">|</span>&#x000A;    <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">exec</span>(<span class="ruby-identifier">command</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ch</span>, <span class="ruby-identifier">success</span><span class="ruby-operator">|</span>&#x000A;      <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;could not execute command: #{command.inspect}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">success</span>&#x000A;      &#x000A;      <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">on_data</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ch2</span>, <span class="ruby-identifier">data</span><span class="ruby-operator">|</span>&#x000A;        <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;          <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">ch2</span>, <span class="ruby-value">:stdout</span>, <span class="ruby-identifier">data</span>)&#x000A;        <span class="ruby-keyword">else</span>&#x000A;          <span class="ruby-identifier">$stdout</span>.<span class="ruby-identifier">print</span>(<span class="ruby-identifier">data</span>)&#x000A;        <span class="ruby-keyword">end</span>&#x000A;      <span class="ruby-keyword">end</span>&#x000A;&#x000A;      <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">on_extended_data</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ch2</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">data</span><span class="ruby-operator">|</span>&#x000A;        <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;          <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">ch2</span>, <span class="ruby-value">:stderr</span>, <span class="ruby-identifier">data</span>)&#x000A;        <span class="ruby-keyword">else</span>&#x000A;          <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">print</span>(<span class="ruby-identifier">data</span>)&#x000A;        <span class="ruby-keyword">end</span>&#x000A;      <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-exec-21'>
                <a name='method-i-exec-21'></a>
                <div class='synopsis'>
                  <span class='name'>exec!</span>
                  <span class='arguments'>(command, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Same as <a href="Session.html#method-i-exec">exec</a>, except this will
                  block until the command finishes. Also, if a block is not given, this will
                  return all output (stdout and stderr) as a single string.</p>
                  
                  <pre>matches = ssh.exec!(&quot;grep something /some/files&quot;)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-exec-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-exec-21-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 357</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">exec!</span>(<span class="ruby-identifier">command</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">block</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ch</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">data</span><span class="ruby-operator">|</span>&#x000A;    <span class="ruby-identifier">ch</span>[<span class="ruby-value">:result</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">&quot;&quot;</span>&#x000A;    <span class="ruby-identifier">ch</span>[<span class="ruby-value">:result</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">data</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-identifier">channel</span> = <span class="ruby-identifier">exec</span>(<span class="ruby-identifier">command</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">wait</span>&#x000A;&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-identifier">channel</span>[<span class="ruby-value">:result</span>]&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-forward'>
                <a name='method-i-forward'></a>
                <div class='synopsis'>
                  <span class='name'>forward</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns a reference to the Net::SSH::Service::Forward service, which can be
                  used for forwarding ports over <a href="../../SSH.html">SSH</a>.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-forward-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-forward-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 426</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">forward</span>&#x000A;  <span class="ruby-ivar">@forward</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Service</span><span class="ruby-operator">::</span><span class="ruby-constant">Forward</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-host'>
                <a name='method-i-host'></a>
                <div class='synopsis'>
                  <span class='name'>host</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the name of the host that was given to the transport layer to
                  connect to.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-host-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-host-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 99</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">host</span>&#x000A;  <span class="ruby-identifier">transport</span>.<span class="ruby-identifier">host</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-listen_to'>
                <a name='method-i-listen_to'></a>
                <div class='synopsis'>
                  <span class='name'>listen_to</span>
                  <span class='arguments'>(io, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Adds an IO object for the event loop to listen to. If a callback is given,
                  it will be invoked when the io is ready to be read, otherwise, the io will
                  merely have its fill method invoked.</p>
                  
                  <p>Any <tt>io</tt> value passed to this method <em>must</em> have mixed into
                  it the Net::SSH::BufferedIo functionality, typically by calling extend on
                  the object.</p>
                  
                  <p>The following example executes a process on the remote server, opens a
                  socket to somewhere, and then pipes data from that socket to the remote
                  process' stdin stream:</p>
                  
                  <pre>channel = ssh.open_channel do |ch|&#x000A;  ch.exec &quot;/some/process/that/wants/input&quot; do |ch, success|&#x000A;    abort &quot;can't execute!&quot; unless success&#x000A;    io = TCPSocket.new(somewhere, port)&#x000A;    io.extend(Net::SSH::BufferedIo)&#x000A;    ssh.listen_to(io)&#x000A;&#x000A;    ch.on_process do&#x000A;      if io.available &gt; 0&#x000A;        ch.send_data(io.read_available)&#x000A;      end&#x000A;    end&#x000A;&#x000A;    ch.on_close do&#x000A;      ssh.stop_listening_to(io)&#x000A;      io.close&#x000A;    end&#x000A;  end&#x000A;end&#x000A;&#x000A;channel.wait</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-listen_to-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-listen_to-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 414</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">listen_to</span>(<span class="ruby-identifier">io</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">listeners</span>[<span class="ruby-identifier">io</span>] = <span class="ruby-identifier">callback</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-loop'>
                <a name='method-i-loop'></a>
                <div class='synopsis'>
                  <span class='name'>loop</span>
                  <span class='arguments'>(wait=nil, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>The main event loop. Calls <a
                  href="Session.html#method-i-process">process</a> until <a
                  href="Session.html#method-i-process">process</a> returns false. If a block
                  is given, it is passed to <a
                  href="Session.html#method-i-process">process</a>, otherwise a default proc
                  is used that just returns true if there are any channels active (see <a
                  href="Session.html#method-i-busy-3F">busy?</a>). The # <tt>wait</tt>
                  parameter is also passed through to <a
                  href="Session.html#method-i-process">process</a> (where it is interpreted
                  as the maximum number of seconds to wait for IO.select to return).</p>
                  
                  <pre># loop for as long as there are any channels active&#x000A;ssh.loop&#x000A;# loop for as long as there are any channels active, but make sure&#x000A;# the event loop runs at least once per 0.1 second&#x000A;ssh.loop(0.1)&#x000A;&#x000A;# loop until ctrl-C is pressed&#x000A;int_pressed = false&#x000A;trap(&quot;INT&quot;) { int_pressed = true }&#x000A;ssh.loop(0.1) { not int_pressed }</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-loop-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-loop-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 167</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">loop</span>(<span class="ruby-identifier">wait</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">running</span> = <span class="ruby-identifier">block</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">busy?</span> }&#x000A;  <span class="ruby-identifier">loop_forever</span> { <span class="ruby-keyword">break</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">process</span>(<span class="ruby-identifier">wait</span>, &amp;<span class="ruby-identifier">running</span>) }&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-on_global_request'>
                <a name='method-i-on_global_request'></a>
                <div class='synopsis'>
                  <span class='name'>on_global_request</span>
                  <span class='arguments'>(type, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Registers a handler to be invoked when the server sends a global request of
                  the given type. The callback receives the request data as the first
                  parameter, and true/false as the second (indicating whether a response is
                  required). If the callback sends the response, it should return :sent.
                  Otherwise, if it returns true, REQUEST_SUCCESS will be sent, and if it
                  returns false, REQUEST_FAILURE will be sent.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-on_global_request-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-on_global_request-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 450</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">on_global_request</span>(<span class="ruby-identifier">type</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">old</span>, <span class="ruby-ivar">@on_global_request</span>[<span class="ruby-identifier">type</span>] = <span class="ruby-ivar">@on_global_request</span>[<span class="ruby-identifier">type</span>], <span class="ruby-identifier">block</span>&#x000A;  <span class="ruby-identifier">old</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-on_open_channel'>
                <a name='method-i-on_open_channel'></a>
                <div class='synopsis'>
                  <span class='name'>on_open_channel</span>
                  <span class='arguments'>(type, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Registers a handler to be invoked when the server wants to open a channel
                  on the client. The callback receives the connection object, the new channel
                  object, and the packet itself as arguments, and should raise <a
                  href="../ChannelOpenFailed.html">ChannelOpenFailed</a> if it is unable to
                  open the channel for some reason. Otherwise, the channel will be opened and
                  a confirmation message sent to the server.</p>
                  
                  <p>This is used by the Net::SSH::Service::Forward service to open a channel
                  when a remote forwarded port receives a connection. However, you are
                  welcome to register handlers for other channel types, as needed.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-on_open_channel-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-on_open_channel-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 440</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">on_open_channel</span>(<span class="ruby-identifier">type</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">channel_open_handlers</span>[<span class="ruby-identifier">type</span>] = <span class="ruby-identifier">block</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-open_channel'>
                <a name='method-i-open_channel'></a>
                <div class='synopsis'>
                  <span class='name'>open_channel</span>
                  <span class='arguments'>(type="session", *extra, &on_confirm)</span>
                </div>
                <div class='description'>
                  
                  <p>Requests that a new channel be opened. By default, the channel will be of
                  type "session", but if you know what you're doing you can select any of the
                  channel types supported by the <a href="../../SSH.html">SSH</a> protocol.
                  The <tt>extra</tt> parameters must be even in number and conform to the
                  same format as described for <a
                  href="../Buffer.html#method-c-from">Net::SSH::Buffer.from</a>. If a
                  callback is given, it will be invoked when the server confirms that the
                  channel opened successfully. The sole parameter for the callback is the
                  channel object itself.</p>
                  
                  <p>In general, you'll use <a
                  href="Session.html#method-i-open_channel">open_channel</a> without any
                  arguments; the only time you'd want to set the channel type or pass
                  additional initialization data is if you were implementing an <a
                  href="../../SSH.html">SSH</a> extension.</p>
                  
                  <pre>channel = ssh.open_channel do |ch|&#x000A;  ch.exec &quot;grep something /some/files&quot; do |ch, success|&#x000A;    ...&#x000A;  end&#x000A;end&#x000A;channel.wait</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-open_channel-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-open_channel-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 296</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">open_channel</span>(<span class="ruby-identifier">type</span>=<span class="ruby-string">&quot;session&quot;</span>, *<span class="ruby-identifier">extra</span>, &amp;<span class="ruby-identifier">on_confirm</span>)&#x000A;  <span class="ruby-identifier">local_id</span> = <span class="ruby-identifier">get_next_channel_id</span>&#x000A;&#x000A;  <span class="ruby-identifier">channel</span> = <span class="ruby-constant">Channel</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">local_id</span>, <span class="ruby-ivar">@max_pkt_size</span>, <span class="ruby-ivar">@max_win_size</span>, &amp;<span class="ruby-identifier">on_confirm</span>)&#x000A;  <span class="ruby-identifier">msg</span> = <span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">from</span>(<span class="ruby-value">:byte</span>, <span class="ruby-constant">CHANNEL_OPEN</span>, <span class="ruby-value">:string</span>, <span class="ruby-identifier">type</span>, <span class="ruby-value">:long</span>, <span class="ruby-identifier">local_id</span>,&#x000A;    <span class="ruby-value">:long</span>, <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">local_maximum_window_size</span>,&#x000A;    <span class="ruby-value">:long</span>, <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">local_maximum_packet_size</span>, *<span class="ruby-identifier">extra</span>)&#x000A;  <span class="ruby-identifier">send_message</span>(<span class="ruby-identifier">msg</span>)&#x000A;&#x000A;  <span class="ruby-identifier">channels</span>[<span class="ruby-identifier">local_id</span>] = <span class="ruby-identifier">channel</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-postprocess'>
                <a name='method-i-postprocess'></a>
                <div class='synopsis'>
                  <span class='name'>postprocess</span>
                  <span class='arguments'>(readers, writers)</span>
                </div>
                <div class='description'>
                  
                  <p>This is called internally as part of <a
                  href="Session.html#method-i-process">process</a>. It loops over the given
                  arrays of reader IO's and writer IO's, processing them as needed, and then
                  calls <a
                  href="../Transport/Session.html#method-i-rekey_as_needed">Net::SSH::Transport::Session#rekey_as_needed</a>
                  to allow the transport layer to rekey. Then returns true.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-postprocess-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-postprocess-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 231</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">postprocess</span>(<span class="ruby-identifier">readers</span>, <span class="ruby-identifier">writers</span>)&#x000A;  <span class="ruby-constant">Array</span>(<span class="ruby-identifier">readers</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">reader</span><span class="ruby-operator">|</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">listeners</span>[<span class="ruby-identifier">reader</span>]&#x000A;      <span class="ruby-identifier">listeners</span>[<span class="ruby-identifier">reader</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">reader</span>)&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-keyword">if</span> <span class="ruby-identifier">reader</span>.<span class="ruby-identifier">fill</span>.<span class="ruby-identifier">zero?</span>&#x000A;        <span class="ruby-identifier">reader</span>.<span class="ruby-identifier">close</span>&#x000A;        <span class="ruby-identifier">stop_listening_to</span>(<span class="ruby-identifier">reader</span>)&#x000A;      <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-constant">Array</span>(<span class="ruby-identifier">writers</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">writer</span><span class="ruby-operator">|</span>&#x000A;    <span class="ruby-identifier">writer</span>.<span class="ruby-identifier">send_pending</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-identifier">send_keepalive_as_needed</span>(<span class="ruby-identifier">readers</span>, <span class="ruby-identifier">writers</span>)&#x000A;  <span class="ruby-identifier">transport</span>.<span class="ruby-identifier">rekey_as_needed</span>&#x000A;&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-preprocess'>
                <a name='method-i-preprocess'></a>
                <div class='synopsis'>
                  <span class='name'>preprocess</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>This is called internally as part of <a
                  href="Session.html#method-i-process">process</a>. It dispatches any
                  available incoming packets, and then runs <a
                  href="Channel.html#method-i-process">Net::SSH::Connection::Channel#process</a>
                  for any active channels. If a block is given, it is invoked at the start of
                  the method and again at the end, and if the block ever returns false, this
                  method returns false. Otherwise, it returns true.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-preprocess-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-preprocess-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 219</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">preprocess</span>&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword">yield</span>(<span class="ruby-keyword">self</span>)&#x000A;  <span class="ruby-identifier">dispatch_incoming_packets</span>&#x000A;  <span class="ruby-identifier">channels</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">id</span>, <span class="ruby-identifier">channel</span><span class="ruby-operator">|</span> <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">process</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">closing?</span> }&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword">yield</span>(<span class="ruby-keyword">self</span>)&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-process'>
                <a name='method-i-process'></a>
                <div class='synopsis'>
                  <span class='name'>process</span>
                  <span class='arguments'>(wait=nil, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>The core of the event loop. It processes a single iteration of the event
                  loop. If a block is given, it should return false when the processing
                  should abort, which causes <a
                  href="Session.html#method-i-process">process</a> to return false.
                  Otherwise, <a href="Session.html#method-i-process">process</a> returns
                  true. The session itself is yielded to the block as its only argument.</p>
                  
                  <p>If <tt>wait</tt> is nil (the default), this method will block until any of
                  the monitored IO objects are ready to be read from or written to. If you
                  want it to not block, you can pass 0, or you can pass any other numeric
                  value to indicate that it should block for no more than that many seconds.
                  Passing 0 is a good way to poll the connection, but if you do it too
                  frequently it can make your CPU quite busy!</p>
                  
                  <p>This will also cause all active channels to be processed once each (see <a
                  href="Channel.html#method-i-on_process">Net::SSH::Connection::Channel#on_process</a>).</p>
                  
                  <pre># process multiple Net::SSH connections in parallel&#x000A;connections = [&#x000A;  Net::SSH.start(&quot;host1&quot;, ...),&#x000A;  Net::SSH.start(&quot;host2&quot;, ...)&#x000A;]&#x000A;connections.each do |ssh|&#x000A;  ssh.exec &quot;grep something /in/some/files&quot;&#x000A;end&#x000A;&#x000A;condition = Proc.new { |s| s.busy? }&#x000A;&#x000A;loop do&#x000A;  connections.delete_if { |ssh| !ssh.process(0.1, &amp;condition) }&#x000A;  break if connections.empty?&#x000A;end</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-process-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-process-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 204</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">process</span>(<span class="ruby-identifier">wait</span>=<span class="ruby-keyword">nil</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">preprocess</span>(&amp;<span class="ruby-identifier">block</span>)&#x000A;&#x000A;  <span class="ruby-identifier">r</span> = <span class="ruby-identifier">listeners</span>.<span class="ruby-identifier">keys</span>&#x000A;  <span class="ruby-identifier">w</span> = <span class="ruby-identifier">r</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">w2</span><span class="ruby-operator">|</span> <span class="ruby-identifier">w2</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:pending_write?</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">w2</span>.<span class="ruby-identifier">pending_write?</span> }&#x000A;  <span class="ruby-identifier">readers</span>, <span class="ruby-identifier">writers</span>, = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">Compat</span>.<span class="ruby-identifier">io_select</span>(<span class="ruby-identifier">r</span>, <span class="ruby-identifier">w</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">io_select_wait</span>(<span class="ruby-identifier">wait</span>))&#x000A;&#x000A;  <span class="ruby-identifier">postprocess</span>(<span class="ruby-identifier">readers</span>, <span class="ruby-identifier">writers</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-send_global_request'>
                <a name='method-i-send_global_request'></a>
                <div class='synopsis'>
                  <span class='name'>send_global_request</span>
                  <span class='arguments'>(type, *extra, &callback)</span>
                </div>
                <div class='description'>
                  
                  <p>Send a global request of the given type. The <tt>extra</tt> parameters must
                  be even in number, and conform to the same format as described for <a
                  href="../Buffer.html#method-c-from">Net::SSH::Buffer.from</a>. If a
                  callback is not specified, the request will not require a response from the
                  server, otherwise the server is required to respond and indicate whether
                  the request was successful or not. This success or failure is indicated by
                  the callback being invoked, with the first parameter being true or false
                  (success, or failure), and the second being the packet itself.</p>
                  
                  <p>Generally, <a href="../../SSH.html">Net::SSH</a> will manage global
                  requests that need to be sent (e.g. port forward requests and such are
                  handled in the Net::SSH::Service::Forward class, for instance). However,
                  there may be times when you need to send a global request that isn't
                  explicitly handled by <a href="../../SSH.html">Net::SSH</a>, and so this
                  method is available to you.</p>
                  
                  <pre>ssh.send_global_request(&quot;keep-alive@openssh.com&quot;)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-send_global_request-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-send_global_request-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 269</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">send_global_request</span>(<span class="ruby-identifier">type</span>, *<span class="ruby-identifier">extra</span>, &amp;<span class="ruby-identifier">callback</span>)&#x000A;  <span class="ruby-identifier">info</span> { <span class="ruby-node">&quot;sending global request #{type}&quot;</span> }&#x000A;  <span class="ruby-identifier">msg</span> = <span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">from</span>(<span class="ruby-value">:byte</span>, <span class="ruby-constant">GLOBAL_REQUEST</span>, <span class="ruby-value">:string</span>, <span class="ruby-identifier">type</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-value">:bool</span>, <span class="ruby-operator">!</span><span class="ruby-identifier">callback</span>.<span class="ruby-identifier">nil?</span>, *<span class="ruby-identifier">extra</span>)&#x000A;  <span class="ruby-identifier">send_message</span>(<span class="ruby-identifier">msg</span>)&#x000A;  <span class="ruby-identifier">pending_requests</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">callback</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">callback</span>&#x000A;  <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-send_message'>
                <a name='method-i-send_message'></a>
                <div class='synopsis'>
                  <span class='name'>send_message</span>
                  <span class='arguments'>(message)</span>
                </div>
                <div class='description'>
                  
                  <p>Enqueues a message to be sent to the server as soon as the socket is
                  available for writing. Most programs will never need to call this, but if
                  you are implementing an extension to the <a href="../../SSH.html">SSH</a>
                  protocol, or if you need to send a packet that <a
                  href="../../SSH.html">Net::SSH</a> does not directly support, you can use
                  this to send it.</p>
                  
                  <pre>ssh.send_message(Buffer.from(:byte, REQUEST_SUCCESS).to_s)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-send_message-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-send_message-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 376</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">send_message</span>(<span class="ruby-identifier">message</span>)&#x000A;  <span class="ruby-identifier">transport</span>.<span class="ruby-identifier">enqueue_message</span>(<span class="ruby-identifier">message</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-shutdown-21'>
                <a name='method-i-shutdown-21'></a>
                <div class='synopsis'>
                  <span class='name'>shutdown!</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Performs a "hard" shutdown of the connection. In general, this should never
                  be done, but it might be necessary (in a rescue clause, for instance, when
                  the connection needs to close but you don't know the status of the
                  underlying protocol's state).</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-shutdown-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-shutdown-21-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 126</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">shutdown!</span>&#x000A;  <span class="ruby-identifier">transport</span>.<span class="ruby-identifier">shutdown!</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-stop_listening_to'>
                <a name='method-i-stop_listening_to'></a>
                <div class='synopsis'>
                  <span class='name'>stop_listening_to</span>
                  <span class='arguments'>(io)</span>
                </div>
                <div class='description'>
                  
                  <p>Removes the given io object from the listeners collection, so that the
                  event loop will no longer monitor it.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-stop_listening_to-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-stop_listening_to-source'><span class="ruby-comment"># File lib/net/ssh/connection/session.rb, line 420</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">stop_listening_to</span>(<span class="ruby-identifier">io</span>)&#x000A;  <span class="ruby-identifier">listeners</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">io</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
