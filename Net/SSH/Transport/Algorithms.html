<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Net::SSH::Transport::Algorithms - net-ssh 4.0.0.alpha2</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../";
</script>

<script src="../../../js/jquery.js"></script>
<script src="../../../js/darkfish.js"></script>

<link href="../../../css/fonts.css" rel="stylesheet">
<link href="../../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="Constants.html">Net::SSH::Transport::Constants</a>
  
  
  
    <li><a class="include" href="../Loggable.html">Net::SSH::Loggable</a>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-allowed_packet-3F">::allowed_packet?</a>
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-5B-5D">#[]</a>
    
    <li ><a href="#method-i-accept_kexinit">#accept_kexinit</a>
    
    <li ><a href="#method-i-allow-3F">#allow?</a>
    
    <li ><a href="#method-i-initialized-3F">#initialized?</a>
    
    <li ><a href="#method-i-pending-3F">#pending?</a>
    
    <li ><a href="#method-i-rekey-21">#rekey!</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Net::SSH::Transport::Algorithms">
  <h1 id="class-Net::SSH::Transport::Algorithms" class="class">
    class Net::SSH::Transport::Algorithms
  </h1>

  <section class="description">
    
<p>Implements the higher-level logic behind an <a
href="../../SSH.html">SSH</a> key-exchange. It handles both the initial
exchange, as well as subsequent re-exchanges (as needed). It also
encapsulates the negotiation of the algorithms, and provides a single point
of access to the negotiated algorithms.</p>

<p>You will never instantiate or reference this directly. It is used
internally by the transport layer.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-allowed_packet-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">allowed_packet?</span><span
            class="method-args">(packet)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if the given packet can be processed during a key-exchange.</p>
          
          

          
          <div class="method-source-code" id="allowed_packet-3F-source">
            <pre><span class="ruby-comment"># File lib/net/ssh/transport/algorithms.rb, line 101</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">allowed_packet?</span>(<span class="ruby-identifier">packet</span>)
  ( <span class="ruby-value">1</span><span class="ruby-operator">..</span> <span class="ruby-value">4</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">packet</span>.<span class="ruby-identifier">type</span>) <span class="ruby-operator">||</span>
  ( <span class="ruby-value">6</span><span class="ruby-operator">..</span><span class="ruby-value">19</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">packet</span>.<span class="ruby-identifier">type</span>) <span class="ruby-operator">||</span>
  (<span class="ruby-value">21</span><span class="ruby-operator">..</span><span class="ruby-value">49</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">packet</span>.<span class="ruby-identifier">type</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(session, options={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Instantiates a new <a href="Algorithms.html">Algorithms</a> object, and
prepares the hash of preferred algorithms based on the options parameter
and the <a href="Algorithms.html#ALGORITHMS">ALGORITHMS</a> constant.</p>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/net/ssh/transport/algorithms.rb, line 109</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">session</span>, <span class="ruby-identifier">options</span>={})
  <span class="ruby-ivar">@session</span> = <span class="ruby-identifier">session</span>
  <span class="ruby-ivar">@logger</span> = <span class="ruby-identifier">session</span>.<span class="ruby-identifier">logger</span>
  <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">options</span>
  <span class="ruby-ivar">@algorithms</span> = {}
  <span class="ruby-ivar">@pending</span> = <span class="ruby-ivar">@initialized</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@client_packet</span> = <span class="ruby-ivar">@server_packet</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">prepare_preferred_algorithms!</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-5B-5D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">[]</span><span
            class="method-args">(key)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>A convenience method for accessing the list of preferred types for a
specific algorithm (see <a
href="Algorithms.html#attribute-i-algorithms">algorithms</a>).</p>
          
          

          
          <div class="method-source-code" id="5B-5D-source">
            <pre><span class="ruby-comment"># File lib/net/ssh/transport/algorithms.rb, line 146</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">algorithms</span>[<span class="ruby-identifier">key</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-accept_kexinit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">accept_kexinit</span><span
            class="method-args">(packet)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Called by the transport layer when a KEXINIT packet is recieved, indicating
that the server wants to exchange keys. This can be spontaneous, or it can
be in response to a client-initiated rekey request (see <a
href="Algorithms.html#method-i-rekey-21">rekey!</a>). Either way, this will
block until the key exchange completes.</p>
          
          

          
          <div class="method-source-code" id="accept_kexinit-source">
            <pre><span class="ruby-comment"># File lib/net/ssh/transport/algorithms.rb, line 133</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">accept_kexinit</span>(<span class="ruby-identifier">packet</span>)
  <span class="ruby-identifier">info</span> { <span class="ruby-string">&quot;got KEXINIT from server&quot;</span> }
  <span class="ruby-ivar">@server_data</span> = <span class="ruby-identifier">parse_server_algorithm_packet</span>(<span class="ruby-identifier">packet</span>)
  <span class="ruby-ivar">@server_packet</span> = <span class="ruby-ivar">@server_data</span>[<span class="ruby-value">:raw</span>]
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">pending?</span>
    <span class="ruby-identifier">send_kexinit</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">proceed!</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-allow-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">allow?</span><span
            class="method-args">(packet)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if no exchange is pending, and otherwise returns true or false
depending on whether the given packet is of a type that is allowed during a
key exchange.</p>
          
          

          
          <div class="method-source-code" id="allow-3F-source">
            <pre><span class="ruby-comment"># File lib/net/ssh/transport/algorithms.rb, line 162</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">allow?</span>(<span class="ruby-identifier">packet</span>)
  <span class="ruby-operator">!</span><span class="ruby-identifier">pending?</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Algorithms</span>.<span class="ruby-identifier">allowed_packet?</span>(<span class="ruby-identifier">packet</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-initialized-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">initialized?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if the algorithms have been negotiated at all.</p>
          
          

          
          <div class="method-source-code" id="initialized-3F-source">
            <pre><span class="ruby-comment"># File lib/net/ssh/transport/algorithms.rb, line 167</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialized?</span>
  <span class="ruby-ivar">@initialized</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-pending-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pending?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns <code>true</code> if a key-exchange is pending. This will be true
from the moment either the client or server requests the key exchange,
until the exchange completes. While an exchange is pending, only a limited
number of packets are allowed, so event processing essentially stops during
this period.</p>
          
          

          
          <div class="method-source-code" id="pending-3F-source">
            <pre><span class="ruby-comment"># File lib/net/ssh/transport/algorithms.rb, line 155</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pending?</span>
  <span class="ruby-ivar">@pending</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rekey-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rekey!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Request a rekey operation. This will return immediately, and does not
actually perform the rekey operation. It does cause the session to change
state, however–until the key exchange finishes, no new packets will be
processed.</p>
          
          

          
          <div class="method-source-code" id="rekey-21-source">
            <pre><span class="ruby-comment"># File lib/net/ssh/transport/algorithms.rb, line 123</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rekey!</span>
  <span class="ruby-ivar">@client_packet</span> = <span class="ruby-ivar">@server_packet</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@initialized</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">send_kexinit</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

