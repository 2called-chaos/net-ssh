By default, SSH packets are not compressed before they are encrypted and shipped over the wire, and this is fine for most uses. However, if you are sending large amounts of data one way or the other (such as via scp, or sftp), you may benefit significantly by enabling compression.

To do so, just pass @true@ to the @:compression@ option when starting the connection:

<h:code lang="ruby">
require 'net/ssh'

Net::SSH.start('host.com', 'bob', :compression => true) do |ssh|
  # ...
end
</h:code>

This will use the default compression level, but sometimes you might want to either optimize for speed (use a lower compression level) or optimize for compression (use a higher compression level). You can pass any value from 1 (best speed) to 9 (best compression) to the @:compression_level@ option:

<h:code lang="ruby">
require 'net/ssh'

Net::SSH.start('host.com', 'bob', :compression => true, :compression_level => 9) do |ssh|
  # ...
end
</h:code>