To forward a port from your local host, to a remote machine, via the SSH connection, just use the @#forward@ service:

<h:code lang="ruby">
require 'net/ssh'

Net::SSH.start("host.com", "bob") do |ssh|
  ssh.forward.local(1234, "www.google.com", 80)
  ssh.loop
end
</h:code>

You can set up as many forwarded ports as you like; just make sure to start the event loop by calling @#loop@ when you're ready for them all to become active.

By default, the local port will only accept connections from "127.0.0.1". To specify a different bind address, give it before the local port number:

<h:code lang="ruby">
require 'net/ssh'

Net::SSH.start("host.com", "bob") do |ssh|
  ssh.forward.local("0.0.0.0", 1234, "www.google.com", 80)
  ssh.loop
end
</h:code>

The above will accept connections from anywhere, on port 1234, and forward them to www.google.com (port 80), via host.com.